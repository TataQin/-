https://mp.weixin.qq.com/s/pJ1EpG1H24BNnEK4hMQyQQ

HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL

HTTP 与 HTTPS 的区别
- HTTP 是明文传输，HTTPS 通过 SSL\TLS 进行了加密
- HTTP 的端口号是 80，HTTPS 是 44
- HTTPS需要到CA申请证书，一般免费证书很少，需要交费
- HTTPS 的连接很简单，是无状态的；HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。
来自中国的张大胖和位于米国的 Bill 进行通信

1.对称加密：
像这样，双方加密解密都用相同密钥的算法，我们称为对称加密算法。
加密和解密使用的是同一个密钥
弊端：被中间人拦截

2.非对称加密

在非对称加密中，加密和解密用的不是一个密钥。类比生活中的场景，如果一个礼物箱子，开锁和上锁用的是不同的钥匙会发生什么？只拥有上锁钥匙的人，可以把礼物放到箱子里，但是他只有一次机会，也就是一旦他将礼物上锁，即便反悔了也没法再打开箱子。而收礼物的人只能开箱子取走礼物。如果放礼物的人丢了钥匙，箱子也不会被中间人打开。

当我们开发一个网站，我们的用户之间的通信用非对称加密。用户发送请求时，用户用一把钥匙加密数据，网站用另一把钥匙解密。在这个过程中，网站拥有的钥匙称为私钥，用户拥有的钥匙称为公钥。之所以这样称呼，是因为很多用户可以共用一把公钥，而只有网站才拥有私钥。

公钥发送的数据必须用私钥解密， 私钥发送的数据必须用公钥解密。网站发送数据加密用私钥，用户用公钥解密。用户发送数据用公钥，网站用私钥解密。而如果用户公钥不小心被盗，黑客也无法通过这把钥匙看其他用户的数据，因为黑客拿不到私钥。另外，当一个数据用公钥加密后，黑客也不可能查阅、篡改数据，因为黑客拿不到私钥

RSA(非对称加密算法)：双方必须协商一对密钥，一个私钥和一个公钥。用私钥加密的数据，只能用公钥才能解密，用公钥加密的数据，只有对应的私钥才能解密

弊端：rsa算法很慢

3.非对称加密+对称加密
(1) 我生成一个对称加密算法的密钥， 用RSA的方式安全发给你，  
(2) 我们随后就不用RSA了， 只用这个密钥，利用对称加密算法来通信  ”
使用 RSA 的方法将加密算法的对称密钥发送过去，之后就可以使用使用这个密钥，利用对称密钥来通信了。就比如说我将钥匙放进了保险柜，然后将保险柜寄给对方。

但不知道同学们有没有发现这其中有个漏洞，非对称加密的算法是公开的，你可以生成公私钥，别人也可以，那怎么保证我拿到的公钥是你的呢？

万一我拿到的公钥是别人的，那我用它加密的数据，不就被别人截去了么？（数字证书）

中间人攻击
还有一个问题就是在使用非对称密钥的时候，首先需要将 Bill 的公钥给张大胖，那么在这个过程中，安全是没有保障的，中间人可以拦截到 Bill 的公钥，就可以对拦截到的公钥进行篡改。

数字证书

需要最后一点就可以了，要确定 Bill 给张大胖的公钥确实是 Bill 的公钥

这个时候就需要公证处的存在了。也就是说我需要先将我的电话号码到公证处去公证一下，然后我将电话号码传给你之后，你在将你收到的电话号码和公证处的比对下，就知道是不是我的了。

对应到计算机世界，那就是数字签名

这种信得过的机构叫做 CA（Certification Authority），电子认证机构，经过 CA 认证的公钥和相关信息，就叫做数字证书。

操作系统内置了所有可信的 CA 的证书，也就是 CA 的公钥和相关信息，叫做根证书。

在 mac 下可以在钥匙串里看到系统内置的所有根证书：

当你打开一个 https 的网站的时候，会把网站的证书下载下来，看看是不是经过这些系统内置过的 CA 根证书所信任的证书，如果是，代表收到的网站的公钥是可信的。